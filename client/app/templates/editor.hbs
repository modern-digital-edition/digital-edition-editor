<main class="grid-y grid-frame">
  <nav class="cell shrink">
    <div class="top-bar">
      <div class="top-bar-left">
        <ul class="menu dropdown" role="menubar">
          <li class="menu-text">TEI Editor</li>
          {{#if session.isAuthenticated}}
            <li title="Open a project from the cloud" role="menuitem">
              {{#link-to "editor.repositories"}}
                <svg viewBox="0 0 24 24" class="icon">
                  <path
                    d="M13,18H14A1,1 0 0,1 15,19H22V21H15A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21H2V19H9A1,1 0 0,1 10,18H11V16H4A1,1 0 0,1 3,15V11A1,1 0 0,1 4,10H20A1,1 0 0,1 21,11V15A1,1 0 0,1 20,16H13V18M4,2H20A1,1 0 0,1 21,3V7A1,1 0 0,1 20,8H4A1,1 0 0,1 3,7V3A1,1 0 0,1 4,2M9,6H10V4H9V6M9,14H10V12H9V14M5,4V6H7V4H5M5,12V14H7V12H5Z"
                  />
                </svg>
              {{/link-to}}
            </li>
            {{#if selected_repository}}
              <li class="separator"></li>
              <li class="menu-text">{{selected_repository.title}}</li>
              <li title="Synchronise the project with the cloud" role="menuitem">
                {{#link-to "editor.repository" selected_repository.id}}
                  <svg viewBox="0 0 24 24" class="icon">
                    <path
                      d="M12,18A6,6 0 0,1 6,12C6,11 6.25,10.03 6.7,9.2L5.24,7.74C4.46,8.97 4,10.43 4,12A8,8 0 0,0 12,20V23L16,19L12,15M12,4V1L8,5L12,9V6A6,6 0 0,1 18,12C18,13 17.75,13.97 17.3,14.8L18.76,16.26C19.54,15.03 20,13.57 20,12A8,8 0 0,0 12,4Z"
                    />
                  </svg>
                {{/link-to}}
              </li>
              <li title="Open a file for editing" role="menuitem">
                {{#link-to "editor.files" selected_repository.id}}
                  <svg viewBox="0 0 24 24" class="icon">
                    <path
                      d="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"
                    />
                  </svg>
                {{/link-to}}
              </li>
              {{#if selected_file}}
                <li class="separator"></li>
                <li class="menu-text">{{selected_file.basename}}</li>
                {{#if selected_file.hasDirtyAttributes}}
                  <li title="Save changes to the file" role="none">
                    <a {{action "save_file"}} role="menuitem">
                      <svg viewBox="0 0 24 24" class="icon">
                        <path
                          d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"
                        />
                      </svg>
                    </a>
                  </li>
                  <li title="Discard changes to the file" role="none">
                    <a {{action "reset_file"}} role="menuitem">
                      <svg viewBox="0 0 24 24" class="icon">
                        <path
                          d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M12.16,14.31C10.6,14.31 9.19,14.89 8.11,15.83L6,13.72V19H11.28L9.15,16.88C9.97,16.2 11,15.78 12.16,15.78C14.23,15.78 16,17.13 16.61,19L18,18.54C17.19,16.09 14.88,14.31 12.16,14.31Z"
                        />
                      </svg>
                    </a>
                  </li>
                {{else}}
                  <li class="menu-icon-disabled">
                    <span>
                      <svg viewBox="0 0 24 24" class="icon">
                        <path
                          d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"
                        />
                      </svg>
                    </span>
                  </li>
                  <li class="menu-icon-disabled">
                    <span>
                      <svg viewBox="0 0 24 24" class="icon">
                        <path
                          d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M12.16,14.31C10.6,14.31 9.19,14.89 8.11,15.83L6,13.72V19H11.28L9.15,16.88C9.97,16.2 11,15.78 12.16,15.78C14.23,15.78 16,17.13 16.61,19L18,18.54C17.19,16.09 14.88,14.31 12.16,14.31Z"
                        />
                      </svg>
                    </span>
                  </li>
                {{/if}}
              {{/if}}
            {{/if}}
          {{/if}}
        </ul>
      </div>
      <div class="top-bar-right">
        <ul class="menu" role="menubar">
          {{#if session.isAuthenticated}}
            <li role="none">
              <a {{action "logout"}} title="Log out" role="menuitem">
                <svg viewBox="0 0 24 24" class="icon">
                  <path
                    d="M17,17.25V14H10V10H17V6.75L22.25,12L17,17.25M13,2A2,2 0 0,1 15,4V8H13V4H4V20H13V16H15V20A2,2 0 0,1 13,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2H13Z"
                  />
                </svg>
              </a>
            </li>
          {{else}}
            <li role="menuitem">
              {{#link-to "users.login"}}
                <svg viewBox="0 0 24 24" class="icon">
                  <path
                    d="M10,17.25V14H3V10H10V6.75L15.25,12L10,17.25M8,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H8A2,2 0 0,1 6,20V16H8V20H17V4H8V8H6V4A2,2 0 0,1 8,2Z"
                  />
                </svg>
              {{/link-to}}
            </li>
          {{/if}}
        </ul>
      </div>
    </div>
  </nav>
  <article class="cell auto cell-block-container grid-padding-x">
    {{outlet}}
  </article>
</main>
